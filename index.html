<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VPN Import</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: #0a0f1e;
      color: white;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .container {
      max-width: 600px;
      background: #1a1f2e;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    h1 { color: #4CAF50; }
    .button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      margin: 10px;
      transition: transform 0.2s;
    }
    .button:hover { transform: scale(1.05); background: #45a049; }
    .link-box {
      background: #2a2f3e;
      padding: 15px;
      border-radius: 10px;
      word-break: break-all;
      font-size: 12px;
      margin-top: 20px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîê –ò–ú–ü–û–†–¢ VPN</h1>
    <div id="status">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
    <div id="buttons"></div>
  </div>

  <script>
    (function() {
      // ===========================================
      // –ü–û–õ–£–ß–ê–ï–ú –°–°–´–õ–ö–£ –ò–ó –ü–ê–†–ê–ú–ï–¢–†–ê key
      // ===========================================
      const params = new URLSearchParams(window.location.search);
      let key = params.get('key');
      
      const statusDiv = document.getElementById('status');
      const buttonsDiv = document.getElementById('buttons');
      
      if (!key) {
        statusDiv.innerHTML = '‚ùå –ù–µ—Ç –∫–ª—é—á–∞ –≤ —Å—Å—ã–ª–∫–µ';
        buttonsDiv.innerHTML = '<p>–ò—Å–ø–æ–ª—å–∑—É–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏</p>';
        return;
      }

      try {
        // ===========================================
        // –î–ï–ö–û–î–ò–†–£–ï–ú URL
        // ===========================================
        let decodedUrl = decodeURIComponent(key);
        statusDiv.innerHTML = '‚úÖ –°—Å—ã–ª–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ...';
        
        // ===========================================
        // –û–ü–†–ï–î–ï–õ–Ø–ï–ú –£–°–¢–†–û–ô–°–¢–í–û
        // ===========================================
        const ua = navigator.userAgent.toLowerCase();
        const isAndroid = ua.includes('android');
        const isIOS = ua.includes('iphone') || ua.includes('ipad') || ua.includes('ipod');
        const isMobile = isAndroid || isIOS;
        const isWindows = ua.includes('windows');
        const isMac = ua.includes('macintosh');
        
        // ===========================================
        // –°–û–ó–î–ê–ï–ú –ü–†–û–¢–û–ö–û–õ–´ –î–õ–Ø –†–ê–ó–ù–´–• –ü–†–ò–õ–û–ñ–ï–ù–ò–ô
        // ===========================================
        // –ò—Å—Ö–æ–¥–Ω–∞—è —Å—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ: happ://add/–ß–ò–°–¢–ê–Ø_–°–°–´–õ–ö–ê
        let happUrl = decodedUrl;
        
        // Hiddify –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç
        let hiddifyUrl = decodedUrl.replace('happ://', 'hiddify://');
        
        // V2RayTun / FairVPN / Outline –∏ —Ç.–¥.
        let v2raytunUrl = decodedUrl.replace('happ://', 'v2raytun://');
        let fairvpnUrl = decodedUrl.replace('happ://', 'fairvpn://');
        let outlineUrl = decodedUrl.replace('happ://add/', 'outline://');
        
        // ===========================================
        // –í–´–ë–ò–†–ê–ï–ú –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ô –ü–†–û–¢–û–ö–û–õ –ü–û –£–°–¢–†–û–ô–°–¢–í–£
        // ===========================================
        let primaryUrl = happUrl;
        let appName = 'Happ';
        
        if (isAndroid) {
          // –ù–∞ –ê–Ω–¥—Ä–æ–∏–¥–µ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º V2RayTun, –ø–æ—Ç–æ–º Happ
          primaryUrl = v2raytunUrl;
          appName = 'V2RayTun';
        } else if (isIOS) {
          // –ù–∞ iOS —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º Happ, –ø–æ—Ç–æ–º FairVPN
          primaryUrl = happUrl;
          appName = 'Happ';
        } else if (isWindows) {
          // –ù–∞ Windows —Å–Ω–∞—á–∞–ª–∞ Hiddify (–æ–Ω –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç), –ø–æ—Ç–æ–º Happ
          primaryUrl = hiddifyUrl;
          appName = 'Hiddify';
        } else if (isMac) {
          // –ù–∞ Mac —Å–Ω–∞—á–∞–ª–∞ Hiddify
          primaryUrl = hiddifyUrl;
          appName = 'Hiddify';
        }
        
        // ===========================================
        // –ü–†–û–ë–£–ï–ú –û–¢–ö–†–´–¢–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–ï
        // ===========================================
        statusDiv.innerHTML = `üîÑ –û—Ç–∫—Ä—ã–≤–∞–µ–º ${appName}...`;
        window.location.href = primaryUrl;
        
        // ===========================================
        // –ï–°–õ–ò –ù–ï –°–†–ê–ë–û–¢–ê–õ–û - –ü–û–ö–ê–ó–´–í–ê–ï–ú –í–°–ï –í–ê–†–ò–ê–ù–¢–´
        // ===========================================
        setTimeout(() => {
          statusDiv.innerHTML = '‚ö†Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏';
          
          let buttons = '';
          
          // –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
          buttons += `<a href="${happUrl}" class="button">üì± Happ</a>`;
          buttons += `<a href="${hiddifyUrl}" class="button">üöÄ Hiddify</a>`;
          
          if (isAndroid) {
            buttons += `<a href="${v2raytunUrl}" class="button">üì° V2RayTun</a>`;
          }
          
          if (isIOS) {
            buttons += `<a href="${fairvpnUrl}" class="button">‚ú® FairVPN</a>`;
          }
          
          buttons += `<a href="${outlineUrl}" class="button">üîµ Outline</a>`;
          
          buttonsDiv.innerHTML = buttons + `<div class="link-box">${decodedUrl}</div>`;
        }, 1500);
        
      } catch(e) {
        statusDiv.innerHTML = '‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Å—ã–ª–∫–∏';
        buttonsDiv.innerHTML = `<div class="link-box">${key}</div>`;
      }
    })();
  </script>
</body>
</html>
