<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>VPN Import ‚Äî –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: #0a0f1e;
      color: white;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .container {
      max-width: 600px;
      background: #1a1f2e;
      border-radius: 24px;
      padding: 30px 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      border: 1px solid #2a2f3e;
    }
    h1 {
      color: #4CAF50;
      font-size: 28px;
      margin-bottom: 8px;
    }
    .subtitle {
      color: #aaa;
      margin-bottom: 30px;
      font-size: 16px;
    }
    .button-grid {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 20px 0;
    }
    .button {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px 20px;
      border-radius: 14px;
      font-size: 18px;
      font-weight: 600;
      text-decoration: none;
      transition: 0.2s;
      border: none;
      color: white;
    }
    .button i { margin-right: 10px; font-size: 24px; }
    .happ { background: #4CAF50; color: white; }
    .v2raytun { background: #FF6B4A; color: white; }
    .hiddify { background: #2196F3; color: white; }
    .fairvpn { background: #9C27B0; color: white; }
    .outline { background: #795548; color: white; }
    .link-box {
      background: #0f1419;
      padding: 16px;
      border-radius: 12px;
      word-break: break-all;
      font-size: 13px;
      color: #8ab4f8;
      margin-top: 25px;
      border: 1px solid #2a2f3e;
      text-align: left;
    }
    .device-badge {
      background: #2a2f3e;
      padding: 8px 16px;
      border-radius: 30px;
      display: inline-block;
      margin-bottom: 15px;
      font-size: 14px;
      color: #ddd;
    }
    hr {
      border: none;
      border-top: 1px solid #2a2f3e;
      margin: 25px 0 15px;
    }
    .small-note {
      font-size: 12px;
      color: #888;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîê VPN IMPORT</h1>
    <div class="subtitle">–í—ã–±–µ—Ä–∏ —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
    
    <div id="deviceInfo" class="device-badge">‚è≥ –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ...</div>
    
    <div id="buttons" class="button-grid">
      <!-- –°—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤—è—Ç—Å—è –∫–Ω–æ–ø–∫–∏ -->
    </div>

    <div id="manual" style="display: none;">
      <hr>
      <div class="small-note">üìã –ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π —Å—Å—ã–ª–∫—É –ø–æ–¥–ø–∏—Å–∫–∏ –≤—Ä—É—á–Ω—É—é:</div>
      <div id="subscriptionLink" class="link-box"></div>
    </div>
  </div>

  <script>
    (function() {
      // ========== –ü–û–õ–£–ß–ê–ï–ú –ü–ê–†–ê–ú–ï–¢–† key ==========
      const urlParams = new URLSearchParams(window.location.search);
      const key = urlParams.get('key');
      
      if (!key) {
        document.querySelector('.device-badge').innerText = '‚ùå –û—à–∏–±–∫–∞: –ø–∞—Ä–∞–º–µ—Ç—Ä key –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω';
        return;
      }

      // –î–µ–∫–æ–¥–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É
      let decodedKey = decodeURIComponent(key);
      // –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç: happ://add/–ß–ò–°–¢–ê–Ø_SUBSCRIPTION_URL
      let subscriptionUrl = decodedKey.replace(/^happ:\/\/add\//, '');
      
      // ========== –û–ü–†–ï–î–ï–õ–Ø–ï–ú –£–°–¢–†–û–ô–°–¢–í–û ==========
      const ua = navigator.userAgent.toLowerCase();
      const platform = navigator.platform?.toLowerCase() || '';
      
      const isAndroid = ua.includes('android');
      const isIOS = ua.includes('iphone') || ua.includes('ipad') || ua.includes('ipod');
      const isWindows = ua.includes('win') || platform.includes('win');
      const isMac = ua.includes('macintosh') || platform.includes('mac');
      const isLinux = ua.includes('linux') && !isAndroid;

      let deviceName = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ';
      if (isAndroid) deviceName = 'üì± Android';
      else if (isIOS) deviceName = 'üçè iPhone/iPad';
      else if (isWindows) deviceName = 'üíª Windows';
      else if (isMac) deviceName = 'üíª Mac';
      else if (isLinux) deviceName = 'üêß Linux';

      document.getElementById('deviceInfo').innerText = `üìå –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${deviceName}`;

      // ========== –§–û–†–ú–ò–†–£–ï–ú –ö–ù–û–ü–ö–ò ==========
      let buttonsHtml = '';

      // --- –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ï –ü–†–û–¢–û–ö–û–õ–´ ---
      const happIntent = decodedKey; // happ://add/...
      const hiddifyIntent = `hiddify://import/${subscriptionUrl}`;
      const outlineIntent = `outline://${subscriptionUrl}`; // –¥–ª—è Outline

      // --- –°–ü–ï–¶–ò–§–ò–ß–ù–´–ï –î–õ–Ø ANDROID ---
      const v2raytunIntent = `v2raytun://add/${subscriptionUrl}`;

      // --- –°–ü–ï–¶–ò–§–ò–ß–ù–´–ï –î–õ–Ø iOS ---
      const fairvpnIntent = `fairvpn://import/${subscriptionUrl}`;

      // ========== –í–´–í–û–î –ö–ù–û–ü–û–ö –ü–û –£–°–¢–†–û–ô–°–¢–í–£ ==========
      
      // ** ANDROID **
      if (isAndroid) {
        buttonsHtml = `
          <a href="${happIntent}" class="button happ">üì± Happ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</a>
          <a href="${v2raytunIntent}" class="button v2raytun">üì° V2RayTun</a>
          <a href="${hiddifyIntent}" class="button hiddify">üöÄ Hiddify</a>
          <a href="${outlineIntent}" class="button outline">üîµ Outline</a>
        `;
      }
      
      // ** iOS **
      else if (isIOS) {
        buttonsHtml = `
          <a href="${happIntent}" class="button happ">üì± Happ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</a>
          <a href="${fairvpnIntent}" class="button fairvpn">‚ú® FairVPN</a>
          <a href="${hiddifyIntent}" class="button hiddify">üöÄ Hiddify</a>
          <a href="${outlineIntent}" class="button outline">üîµ Outline</a>
        `;
      }
      
      // ** WINDOWS **
      else if (isWindows) {
        buttonsHtml = `
          <a href="${hiddifyIntent}" class="button hiddify">üöÄ Hiddify (–ª—É—á—à–µ –¥–ª—è Windows)</a>
          <a href="${happIntent}" class="button happ">üì± Happ</a>
          <a href="${outlineIntent}" class="button outline">üîµ Outline</a>
        `;
      }
      
      // ** MAC **
      else if (isMac) {
        buttonsHtml = `
          <a href="${hiddifyIntent}" class="button hiddify">üöÄ Hiddify (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</a>
          <a href="${happIntent}" class="button happ">üì± Happ</a>
          <a href="${fairvpnIntent}" class="button fairvpn">‚ú® FairVPN</a>
        `;
      }
      
      // ** LINUX –∏ –¥—Ä—É–≥–∏–µ **
      else {
        buttonsHtml = `
          <a href="${hiddifyIntent}" class="button hiddify">üöÄ Hiddify</a>
          <a href="${happIntent}" class="button happ">üì± Happ</a>
        `;
      }

      // –í—Å—Ç–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
      document.getElementById('buttons').innerHTML = buttonsHtml;

      // ========== –ü–û–ö–ê–ó–´–í–ê–ï–ú –°–°–´–õ–ö–£ –ü–û–î–ü–ò–°–ö–ò ==========
      const manualDiv = document.getElementById('manual');
      const subLinkEl = document.getElementById('subscriptionLink');
      subLinkEl.innerText = subscriptionUrl;
      manualDiv.style.display = 'block';

      // ========== –ù–ï –î–ï–õ–ê–ï–ú –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –†–ï–î–ò–†–ï–ö–¢ ==========
      // –¢–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ç—ã–∫–∞–µ—Ç.

    })();
  </script>
</body>
</html>
