<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VPN Import ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0a0f1e;
      color: white;
      text-align: center;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: #1a1f2e;
      border-radius: 20px;
      padding: 30px;
    }
    h2 { color: #4CAF50; }
    .button {
      display: inline-block;
      background: #4CAF50;
      color: white;
      padding: 12px 24px;
      margin: 8px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
    }
    .link-box {
      background: #2a2f3e;
      padding: 12px;
      border-radius: 8px;
      word-break: break-all;
      font-size: 12px;
      margin-top: 20px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üîÑ –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ...</h2>
    <div id="content"></div>
  </div>

  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const key = params.get('key');      // –¥–ª—è Android (happ://add/...)
      const sub = params.get('sub');      // –¥–ª—è Windows (—á–∏—Å—Ç–∞—è HTTPS)
      
      if (!key && !sub) {
        document.getElementById('content').innerHTML = '<p style="color:red;">‚ùå –ù–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ key –∏–ª–∏ sub</p>';
        return;
      }

      // –î–µ–∫–æ–¥–∏—Ä—É–µ–º
      let subscriptionUrl = '';
      if (sub) {
        subscriptionUrl = decodeURIComponent(sub);
      } else if (key) {
        let decodedKey = decodeURIComponent(key);
        subscriptionUrl = decodedKey.replace(/^happ:\/\/add\//, '');
      }

      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
      const ua = navigator.userAgent.toLowerCase();
      const isAndroid = ua.includes('android');
      const isWindows = ua.includes('win');
      const isIOS = ua.includes('iphone') || ua.includes('ipad') || ua.includes('ipod');
      const isMac = ua.includes('macintosh');
      
      let content = '';

      // ========== ANDROID ==========
      if (isAndroid) {
        if (!key) {
          content = '<p style="color:red;">‚ùå –î–ª—è Android –Ω—É–∂–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä key</p>';
        } else {
          let decodedKey = decodeURIComponent(key);
          let v2rayUrl = decodedKey.replace('happ://', 'v2raytun://');
          let hiddifyUrl = `hiddify://import/${subscriptionUrl}`;
          
          content = `
            <p style="color:#aaa;">üì± Android ‚Äî –≤—ã–±–µ—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</p>
            <a href="${decodedKey}" class="button">üì± Happ</a>
            <a href="${v2rayUrl}" class="button" style="background:#FF6B4A;">üì° V2RayTun</a>
            <a href="${hiddifyUrl}" class="button" style="background:#2196F3;">üöÄ Hiddify</a>
            <div class="link-box">üîó –ß–∏—Å—Ç–∞—è –ø–æ–¥–ø–∏—Å–∫–∞:<br>${subscriptionUrl}</div>
          `;
        }
      }
      
      // ========== WINDOWS ==========
      else if (isWindows) {
        if (!sub) {
          content = '<p style="color:red;">‚ùå –î–ª—è Windows –Ω—É–∂–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä sub</p>';
        } else {
          content = `
            <p style="color:#aaa;">üíª Windows ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏–º–ø–æ—Ä—Ç—É</p>
            <p style="font-size:14px;">–°–∫–æ–ø–∏—Ä—É–π —Å—Å—ã–ª–∫—É –∏ –≤—Å—Ç–∞–≤—å –≤ Hiddify:</p>
            <div class="link-box" onclick="navigator.clipboard.writeText('${subscriptionUrl}')">
              ${subscriptionUrl}
              <br><span style="color:#4CAF50;">üìã –Ω–∞–∂–º–∏, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
            </div>
            <p style="font-size:12px; color:#888;">Hiddify: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É ‚Üí –í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É ‚Üí –ò–º–ø–æ—Ä—Ç</p>
            <p style="font-size:12px; color:#888;">Happ –Ω–∞ Windows ‚Äî –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô, –æ–Ω —Å–ª–æ–º–∞–Ω.</p>
          `;
        }
      }
      
      // ========== iOS / MAC / LINUX ==========
      else {
        let happUrl = `happ://add/${subscriptionUrl}`;
        let hiddifyUrl = `hiddify://import/${subscriptionUrl}`;
        let fairvpnUrl = `fairvpn://import/${subscriptionUrl}`;
        
        content = `
          <p style="color:#aaa;">üçèüíª –î—Ä—É–≥–∏–µ –û–° ‚Äî –≤—ã–±–µ—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</p>
          <a href="${happUrl}" class="button">üì± Happ</a>
          <a href="${hiddifyUrl}" class="button">üöÄ Hiddify</a>
          ${isIOS ? `<a href="${fairvpnUrl}" class="button" style="background:#9C27B0;">‚ú® FairVPN</a>` : ''}
          <div class="link-box">üîó –ß–∏—Å—Ç–∞—è –ø–æ–¥–ø–∏—Å–∫–∞:<br>${subscriptionUrl}</div>
        `;
      }
      
      document.getElementById('content').innerHTML = content;
    })();
  </script>
</body>
</html>
